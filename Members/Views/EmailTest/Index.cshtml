@{
    ViewData["Title"] = "Email Test";
}

<div class="container mt-4">
    <h2>Email Configuration Test</h2>

    @if (ViewBag.Message != null)
    {
        <div class="alert @(ViewBag.Success == true ? "alert-success" : "alert-danger")" role="alert">
            @ViewBag.Message
        </div>
    }

    <div class="card rounded mx-1 my-4 ">
        <form asp-action="TestEmail" method="post" class="mt-4">
            <div class="mb-3">
                <label for="testEmail" class="form-label">Test Email Address:</label>
                <input type="email" class="form-control" id="testEmail" name="testEmail" required>
            </div>
            <button type="submit" class="btn btn-primary">Send Test Email</button>
            <a asp-controller="Home" asp-action="Index" class="btn btn-secondary">Back to Home</a>
        </form>

        <div class="mt-4">
            <h4>Current Environment Variables (check server logs for actual values):</h4>
            <ul>
                <li>SMTP_SERVER: @Environment.GetEnvironmentVariable("SMTP_SERVER_HOA-CLOUD")</li>
                <li>SMTP_PORT: @Environment.GetEnvironmentVariable("SMTP_PORT")</li>
                <li>SMTP_USERNAME: @Environment.GetEnvironmentVariable("SMTP_USERNAME_HOA-CLOUD")</li>
                <li>SMTP_SSL: @Environment.GetEnvironmentVariable("SMTP_SSL")</li>
                <li>SMTP_PASSWORD: [Hidden for security]</li>
            </ul>
        </div>

    </div>
    
</div>